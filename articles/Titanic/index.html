<!DOCTYPE html>


  <html class="light page-post">


<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
  
  <title>Titanic | Hahally&#39;s BLOG</title>

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
    <meta name="keywords" content="data analysis," />
  

  <meta name="description" content="大纲Titanic Survival Predictions 可以算是机器学习中的 Hello World了。像kaggle和天池这样的竞赛平台，都将此作为入门的经典题目。  数据：Titanic Survival Predictions  train.csv：训练集 test.csv：测试集   任务：主要对 train.csv 数据进行处理分析。  了解和掌握 pandas 透视表的一些基本操">
<meta property="og:type" content="article">
<meta property="og:title" content="Titanic">
<meta property="og:url" content="https://hahally.github.io/articles/Titanic/index.html">
<meta property="og:site_name" content="Hahally&#39;s BLOG">
<meta property="og:description" content="大纲Titanic Survival Predictions 可以算是机器学习中的 Hello World了。像kaggle和天池这样的竞赛平台，都将此作为入门的经典题目。  数据：Titanic Survival Predictions  train.csv：训练集 test.csv：测试集   任务：主要对 train.csv 数据进行处理分析。  了解和掌握 pandas 透视表的一些基本操">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://hahally.github.io/articles/Titanic/output_15_1.png">
<meta property="og:image" content="https://hahally.github.io/articles/Titanic/output_17_0.png">
<meta property="og:image" content="https://hahally.github.io/articles/Titanic/output_19_0.png">
<meta property="og:image" content="https://hahally.github.io/articles/Titanic/output_17_1.png">
<meta property="article:published_time" content="2021-01-28T06:46:17.000Z">
<meta property="article:modified_time" content="2021-01-29T06:03:54.701Z">
<meta property="article:author" content="hahally">
<meta property="article:tag" content="data analysis">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://hahally.github.io/articles/Titanic/output_15_1.png">

  

  
    <link rel="icon" href="/favicon.ico">
  

  <link href="/css/styles.css?v=c114cbeddx" rel="stylesheet">


  
    
<link rel="stylesheet" href="/css/personal-style.css">

  

  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-38189205-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


  
  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?57e94d016e201fba3603a8a2b0263af0";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>


  
  <script type="text/javascript">
	(function(){
	    var bp = document.createElement('script');
	    var curProtocol = window.location.protocol.split(':')[0];
	    if (curProtocol === 'https') {
	        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
	    }
	    else {
	        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
	    }
	    var s = document.getElementsByTagName("script")[0];
	    s.parentNode.insertBefore(bp, s);
	})();
  </script>



  
    <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.3.0/css/font-awesome.min.css">
  

<meta name="generator" content="Hexo 4.2.0"><link rel="alternate" href="/atom.xml" title="Hahally's BLOG" type="application/atom+xml"><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</head>

<body>


  
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><span id="toolbox-mobile" class="toolbox-mobile">盒子</span>
  

  <div class="post-header CENTER">
   
  <div class="toolbox">
    <a class="toolbox-entry" href="/">
      <span class="toolbox-entry-text">盒子</span>
      <i class="icon-angle-down"></i>
      <i class="icon-home"></i>
    </a>
    <ul class="list-toolbox">
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/archives/"
            rel="noopener noreferrer"
            target="_self"
            >
            博客
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/category/"
            rel="noopener noreferrer"
            target="_self"
            >
            分类
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/tag/"
            rel="noopener noreferrer"
            target="_self"
            >
            标签
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/link/"
            rel="noopener noreferrer"
            target="_self"
            >
            友链
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/about/"
            rel="noopener noreferrer"
            target="_self"
            >
            关于
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/atom.xml"
            rel="noopener noreferrer"
            target="_blank"
            >
            RSS
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/search/"
            rel="noopener noreferrer"
            target="_self"
            >
            搜索
          </a>
        </li>
      
    </ul>
  </div>


</div>


  <div id="toc" class="toc-article">
    <strong class="toc-title">文章目录</strong>
    <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#大纲"><span class="toc-text">大纲</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#导入相关的库"><span class="toc-text">导入相关的库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#数据预览"><span class="toc-text">数据预览</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#数据可视化"><span class="toc-text">数据可视化</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#tips"><span class="toc-text">tips</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#关于缺失值"><span class="toc-text">关于缺失值</span></a></li></ol>
  </div>



<div class="content content-post CENTER">
   <article id="post-Titanic" class="article article-type-post" itemprop="blogPost">
  <header class="article-header">
    <h1 class="post-title">Titanic</h1>

    <div class="article-meta">
      <span>
        <i class="icon-calendar"></i>
        <span>2021.01.28</span>
      </span>

      
        <span class="article-author">
          <i class="icon-user"></i>
          <span>hahally</span>
        </span>
      

      


      
        <span>
          <i class="icon-comment"></i>
          <a href="https://hahally.github.io/articles/Titanic/#disqus_thread"></a>
        </span>
      

      
      <i class="fa fa-eye"></i> 
        <span id="busuanzi_container_page_pv">
           &nbsp热度 <span id="busuanzi_value_page_pv">
           <i class="fa fa-spinner fa-spin"></i></span>℃
        </span>
      
      
    </div>
  </header>

  <div class="article-content">
    
      <h3 id="大纲"><a href="#大纲" class="headerlink" title="大纲"></a>大纲</h3><p><code>Titanic Survival Predictions</code> 可以算是机器学习中的 <code>Hello World</code>了。像kaggle和天池这样的竞赛平台，都将此作为入门的经典题目。</p>
<ul>
<li><p>数据：Titanic Survival Predictions</p>
<ul>
<li>train.csv：训练集</li>
<li>test.csv：测试集</li>
</ul>
</li>
<li><p>任务：主要对 <code>train.csv</code> 数据进行处理分析。</p>
<ul>
<li>了解和掌握 <code>pandas</code> 透视表的一些基本操作(读取，查看，聚合…)</li>
<li>了解和掌握一些基本绘图方法</li>
<li>分析影响游客存活的因素</li>
<li>分析对缺失值的处理方法</li>
</ul>
</li>
<li><p>数据属性说明(可以参考这里的<a href="https://www.kaggle.com/c/titanic/data" target="_blank" rel="noopener">Data Dictionary</a>)</p>
<ul>
<li>PassengerId：id</li>
<li>Survived：是否存活(0/1)</li>
<li>Pclass: 舱位类型(1,2,3)</li>
<li>Name：姓名</li>
<li>Sex：性别</li>
<li>Age：年龄</li>
<li>SibSp：of siblings / spouses aboard the Titanic</li>
<li>Parch：of parents / children aboard the Titanic</li>
<li>Ticket：Ticket number</li>
<li>Fare：票价</li>
<li>Cabin：房间编号</li>
<li>Embarked：登船港口</li>
</ul>
<ul>
<li>相关文档：<ul>
<li><a href="https://pandas.pydata.org/pandas-docs/stable/" target="_blank" rel="noopener">https://pandas.pydata.org/pandas-docs/stable/</a></li>
<li><a href="https://www.pypandas.cn/" target="_blank" rel="noopener">https://www.pypandas.cn/</a></li>
<li><a href="https://www.matplotlib.org.cn/" target="_blank" rel="noopener">https://www.matplotlib.org.cn/</a></li>
<li><a href="https://matplotlib.org/" target="_blank" rel="noopener">https://matplotlib.org/</a></li>
<li><a href="https://www.numpy.org.cn/" target="_blank" rel="noopener">https://www.numpy.org.cn/</a></li>
<li><a href="https://numpy.org/doc/stable/reference/" target="_blank" rel="noopener">https://numpy.org/doc/stable/reference/</a></li>
<li><a href="http://seaborn.pydata.org/" target="_blank" rel="noopener">http://seaborn.pydata.org/</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="导入相关的库"><a href="#导入相关的库" class="headerlink" title="导入相关的库"></a>导入相关的库</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd </span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns</span><br><span class="line">%matplotlib inline</span><br><span class="line"></span><br><span class="line"><span class="comment">#ignore warnings</span></span><br><span class="line"><span class="keyword">import</span> warnings</span><br><span class="line">warnings.filterwarnings(<span class="string">'ignore'</span>)</span><br></pre></td></tr></table></figure>

<h3 id="数据预览"><a href="#数据预览" class="headerlink" title="数据预览"></a>数据预览</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">### 读取数据</span></span><br><span class="line">dt_train = pd.read_csv(<span class="string">'../dataset/train.csv'</span>)</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># head() 函数默认查看前 5 条数据</span></span><br><span class="line">dt_train.head()</span><br></pre></td></tr></table></figure>




<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>PassengerId</th>
      <th>Survived</th>
      <th>Pclass</th>
      <th>Name</th>
      <th>Sex</th>
      <th>Age</th>
      <th>SibSp</th>
      <th>Parch</th>
      <th>Ticket</th>
      <th>Fare</th>
      <th>Cabin</th>
      <th>Embarked</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>0</td>
      <td>3</td>
      <td>Braund, Mr. Owen Harris</td>
      <td>male</td>
      <td>22.0</td>
      <td>1</td>
      <td>0</td>
      <td>A/5 21171</td>
      <td>7.2500</td>
      <td>NaN</td>
      <td>S</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>1</td>
      <td>1</td>
      <td>Cumings, Mrs. John Bradley (Florence Briggs Th...</td>
      <td>female</td>
      <td>38.0</td>
      <td>1</td>
      <td>0</td>
      <td>PC 17599</td>
      <td>71.2833</td>
      <td>C85</td>
      <td>C</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>1</td>
      <td>3</td>
      <td>Heikkinen, Miss. Laina</td>
      <td>female</td>
      <td>26.0</td>
      <td>0</td>
      <td>0</td>
      <td>STON/O2. 3101282</td>
      <td>7.9250</td>
      <td>NaN</td>
      <td>S</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>1</td>
      <td>1</td>
      <td>Futrelle, Mrs. Jacques Heath (Lily May Peel)</td>
      <td>female</td>
      <td>35.0</td>
      <td>1</td>
      <td>0</td>
      <td>113803</td>
      <td>53.1000</td>
      <td>C123</td>
      <td>S</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>0</td>
      <td>3</td>
      <td>Allen, Mr. William Henry</td>
      <td>male</td>
      <td>35.0</td>
      <td>0</td>
      <td>0</td>
      <td>373450</td>
      <td>8.0500</td>
      <td>NaN</td>
      <td>S</td>
    </tr>
  </tbody>
</table>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># sample() 随机采样</span></span><br><span class="line">train.sample(<span class="number">5</span>)</span><br></pre></td></tr></table></figure>


<div>

<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>PassengerId</th>
      <th>Survived</th>
      <th>Pclass</th>
      <th>Age</th>
      <th>SibSp</th>
      <th>Parch</th>
      <th>Fare</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>127</th>
      <td>128</td>
      <td>1</td>
      <td>3</td>
      <td>24.00</td>
      <td>0</td>
      <td>0</td>
      <td>7.1417</td>
    </tr>
    <tr>
      <th>669</th>
      <td>670</td>
      <td>1</td>
      <td>1</td>
      <td>NaN</td>
      <td>1</td>
      <td>0</td>
      <td>52.0000</td>
    </tr>
    <tr>
      <th>229</th>
      <td>230</td>
      <td>0</td>
      <td>3</td>
      <td>NaN</td>
      <td>3</td>
      <td>1</td>
      <td>25.4667</td>
    </tr>
    <tr>
      <th>644</th>
      <td>645</td>
      <td>1</td>
      <td>3</td>
      <td>0.75</td>
      <td>2</td>
      <td>1</td>
      <td>19.2583</td>
    </tr>
    <tr>
      <th>337</th>
      <td>338</td>
      <td>1</td>
      <td>1</td>
      <td>41.00</td>
      <td>0</td>
      <td>0</td>
      <td>134.5000</td>
    </tr>
  </tbody>
</table>



<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># info() 查看数据基本信息</span></span><br><span class="line">dt_train.info()</span><br></pre></td></tr></table></figure>

<pre><code>&lt;class &apos;pandas.core.frame.DataFrame&apos;&gt;
RangeIndex: 891 entries, 0 to 890
Data columns (total 12 columns):
PassengerId    891 non-null int64
Survived       891 non-null int64
Pclass         891 non-null int64
Name           891 non-null object
Sex            891 non-null object
Age            714 non-null float64
SibSp          891 non-null int64
Parch          891 non-null int64
Ticket         891 non-null object
Fare           891 non-null float64
Cabin          204 non-null object
Embarked       889 non-null object
dtypes: float64(2), int64(5), object(5)
memory usage: 83.7+ KB</code></pre><p>可以看到总共有 12 columns(12个字段,通过 <code>dt_train.columns</code> 可以得到)。<br>info中也可以大致知道各个字段缺失情况：<code>Age</code>、<code>Fare</code>、<code>Cabin</code>、<code>Embarked</code>都是存在缺失值的。<br>除此外，各个字段的数据类型也一目了然。</p>
<ul>
<li>Survived: int</li>
<li>Pclass: int</li>
<li>Name: string</li>
<li>Sex: string</li>
<li>Age: float</li>
<li>SibSp: int</li>
<li>Parch: int</li>
<li>Ticket: string</li>
<li>Fare: float</li>
<li>Cabin: string</li>
<li>Embarked: string</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 获取字段名称</span></span><br><span class="line">dt_train.columns</span><br></pre></td></tr></table></figure>


<pre><code>Index([&apos;PassengerId&apos;, &apos;Survived&apos;, &apos;Pclass&apos;, &apos;Name&apos;, &apos;Sex&apos;, &apos;Age&apos;, &apos;SibSp&apos;,
       &apos;Parch&apos;, &apos;Ticket&apos;, &apos;Fare&apos;, &apos;Cabin&apos;, &apos;Embarked&apos;],
      dtype=&apos;object&apos;)</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看数值类型字段的大致数据分布情况</span></span><br><span class="line">dt_train.describe()</span><br></pre></td></tr></table></figure>


<div>

<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>PassengerId</th>
      <th>Survived</th>
      <th>Pclass</th>
      <th>Age</th>
      <th>SibSp</th>
      <th>Parch</th>
      <th>Fare</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>891.000000</td>
      <td>891.000000</td>
      <td>891.000000</td>
      <td>714.000000</td>
      <td>891.000000</td>
      <td>891.000000</td>
      <td>891.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>446.000000</td>
      <td>0.383838</td>
      <td>2.308642</td>
      <td>29.699118</td>
      <td>0.523008</td>
      <td>0.381594</td>
      <td>32.204208</td>
    </tr>
    <tr>
      <th>std</th>
      <td>257.353842</td>
      <td>0.486592</td>
      <td>0.836071</td>
      <td>14.526497</td>
      <td>1.102743</td>
      <td>0.806057</td>
      <td>49.693429</td>
    </tr>
    <tr>
      <th>min</th>
      <td>1.000000</td>
      <td>0.000000</td>
      <td>1.000000</td>
      <td>0.420000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>223.500000</td>
      <td>0.000000</td>
      <td>2.000000</td>
      <td>20.125000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>7.910400</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>446.000000</td>
      <td>0.000000</td>
      <td>3.000000</td>
      <td>28.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>14.454200</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>668.500000</td>
      <td>1.000000</td>
      <td>3.000000</td>
      <td>38.000000</td>
      <td>1.000000</td>
      <td>0.000000</td>
      <td>31.000000</td>
    </tr>
    <tr>
      <th>max</th>
      <td>891.000000</td>
      <td>1.000000</td>
      <td>3.000000</td>
      <td>80.000000</td>
      <td>8.000000</td>
      <td>6.000000</td>
      <td>512.329200</td>
    </tr>
  </tbody>
</table>



<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看缺失值分布: 主要年龄特征缺失严重</span></span><br><span class="line">dt_train.isnull().sum()</span><br></pre></td></tr></table></figure>


<pre><code>PassengerId      0
Survived         0
Pclass           0
Name             0
Sex              0
Age            177
SibSp            0
Parch            0
Ticket           0
Fare             0
Cabin          687
Embarked         2
dtype: int64</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 缺失百分比</span></span><br><span class="line">pd.isnull(dt_train).sum()*<span class="number">100</span>/dt_train.shape[<span class="number">0</span>]</span><br></pre></td></tr></table></figure>


<pre><code>PassengerId     0.000000
Survived        0.000000
Pclass          0.000000
Name            0.000000
Sex             0.000000
Age            19.865320
SibSp           0.000000
Parch           0.000000
Ticket          0.000000
Fare            0.000000
Cabin          77.104377
Embarked        0.224467
dtype: float64</code></pre><p>PS：从数据出发，思考哪些因素或那类特征的人更容易从这场灾难中存活下来</p>
<h3 id="数据可视化"><a href="#数据可视化" class="headerlink" title="数据可视化"></a>数据可视化</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 绘制条形图观察 性别 特征</span></span><br><span class="line">sns.barplot(x=<span class="string">"Sex"</span>, y=<span class="string">"Survived"</span>, data=dt_train)</span><br><span class="line"></span><br><span class="line"><span class="comment">#print percentages of females vs. males that survive</span></span><br><span class="line">print(</span><br><span class="line">    <span class="string">"Percentage of females who survived:"</span>,</span><br><span class="line">    dt_train.Survived[dt_train.Sex == <span class="string">'female'</span>].value_counts(normalize=<span class="literal">True</span>)[<span class="number">1</span>] *</span><br><span class="line">    <span class="number">100</span>)</span><br><span class="line"></span><br><span class="line">print(</span><br><span class="line">    <span class="string">"Percentage of males who survived:"</span>,</span><br><span class="line">    dt_train.Survived[dt_train.Sex == <span class="string">'male'</span>].value_counts(normalize=<span class="literal">True</span>)[<span class="number">1</span>] * <span class="number">100</span>)</span><br></pre></td></tr></table></figure>

<pre><code>Percentage of females who survived: 74.20382165605095
Percentage of males who survived: 18.890814558058924</code></pre><p><img src="/articles/Titanic/output_15_1.png" alt="png"></p>
<p>从上面可以看到，女性比男性其实具有更高的生存机会。其他特征，可自行类比做图分析。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 直方图</span></span><br><span class="line"></span><br><span class="line">cols = [<span class="string">'Age'</span>, <span class="string">'SibSp'</span>, <span class="string">'Parch'</span>, <span class="string">'Fare'</span>, <span class="string">'Pclass'</span>]</span><br><span class="line">dt_train[cols].hist(figsize = (<span class="number">15</span>, <span class="number">6</span>), color = <span class="string">'steelblue'</span>, edgecolor = <span class="string">'firebrick'</span>, linewidth = <span class="number">1.5</span>, layout = (<span class="number">2</span>, <span class="number">3</span>));</span><br></pre></td></tr></table></figure>

<p><img src="/articles/Titanic/output_17_0.png" alt="png"></p>
<p>从年龄来看，大部分是40岁以下的年轻人；Fare中大部分在一百美元内；Parch与SibSp可以知道独自乘船的人较多；Pclass说明大部分人订的是3等舱。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 年龄分布情况</span></span><br><span class="line">men = dt_train[dt_train[<span class="string">'Sex'</span>]  == <span class="string">'male'</span>]</span><br><span class="line">women = dt_train[dt_train[<span class="string">'Sex'</span>]  == <span class="string">'female'</span>]</span><br><span class="line"></span><br><span class="line">fig, (ax1, ax2, ax3) = plt.subplots(<span class="number">1</span>, <span class="number">3</span>, figsize = (<span class="number">13</span>, <span class="number">4</span>))</span><br><span class="line"></span><br><span class="line">sns.distplot(dt_train[dt_train[<span class="string">'Survived'</span>] == <span class="number">1</span>][<span class="string">'Age'</span>].dropna(), bins = <span class="number">20</span>, label = <span class="string">'Survived'</span>, ax = ax1, kde = <span class="literal">False</span>)</span><br><span class="line">sns.distplot(dt_train[dt_train[<span class="string">'Survived'</span>] == <span class="number">0</span>][<span class="string">'Age'</span>].dropna(), bins = <span class="number">20</span>, label = <span class="string">'Deceased'</span>, ax = ax1, kde = <span class="literal">False</span>)</span><br><span class="line">ax1.legend()</span><br><span class="line">ax1.set_title(<span class="string">'Age Distribution - All Passengers'</span>)</span><br><span class="line"></span><br><span class="line">sns.distplot(women[women[<span class="string">'Survived'</span>] == <span class="number">1</span>][<span class="string">'Age'</span>].dropna(), bins = <span class="number">20</span>, label = <span class="string">'Survived'</span>, ax = ax2, kde = <span class="literal">False</span>)</span><br><span class="line">sns.distplot(women[women[<span class="string">'Survived'</span>] == <span class="number">0</span>][<span class="string">'Age'</span>].dropna(), bins = <span class="number">20</span>, label = <span class="string">'Deceased'</span>, ax = ax2, kde = <span class="literal">False</span>)</span><br><span class="line">ax2.legend()</span><br><span class="line">ax2.set_title(<span class="string">'Age Distribution - Women'</span>)</span><br><span class="line"></span><br><span class="line">sns.distplot(men[men[<span class="string">'Survived'</span>] == <span class="number">1</span>][<span class="string">'Age'</span>].dropna(), bins = <span class="number">20</span>, label = <span class="string">'Survived'</span>, ax = ax3, kde = <span class="literal">False</span>)</span><br><span class="line">sns.distplot(men[men[<span class="string">'Survived'</span>] == <span class="number">0</span>][<span class="string">'Age'</span>].dropna(), bins = <span class="number">20</span>, label = <span class="string">'Deceased'</span>, ax = ax3, kde = <span class="literal">False</span>)</span><br><span class="line">ax3.legend()</span><br><span class="line">ax3.set_title(<span class="string">'Age Distribution - Men'</span>)</span><br><span class="line"></span><br><span class="line">plt.tight_layout()</span><br></pre></td></tr></table></figure>

<p><img src="/articles/Titanic/output_19_0.png" alt="png"></p>
<p>这三幅图似乎表明：</p>
<ul>
<li>二三四十岁的人存活率要更高</li>
<li>十岁以下的年龄段出现的峰值说明婴幼儿也更容易存活下来</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 相关性矩阵图</span></span><br><span class="line">names = [<span class="string">'Survived'</span>, <span class="string">'Pclass'</span>, <span class="string">'Sex'</span>, <span class="string">'Age'</span>, <span class="string">'SibSp'</span>, <span class="string">'Parch'</span>, <span class="string">'Fare'</span>]</span><br><span class="line"></span><br><span class="line">correlations = dt_train.corr()</span><br><span class="line">correction = abs(correlations)          <span class="comment"># 取绝对值，只看相关程度 ，不关心正相关还是负相关</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># plot correlation matrix</span></span><br><span class="line">fig = plt.figure()</span><br><span class="line">ax = fig.add_subplot(figsize=(<span class="number">20</span>, <span class="number">20</span>))  <span class="comment">#图的大小为20*20</span></span><br><span class="line"></span><br><span class="line">ax = sns.heatmap(correction,</span><br><span class="line">                 cmap=plt.cm.Greys,</span><br><span class="line">                 linewidths=<span class="number">0.05</span>,</span><br><span class="line">                 vmax=<span class="number">1</span>,</span><br><span class="line">                 vmin=<span class="number">0</span>,</span><br><span class="line">                 annot=<span class="literal">True</span>,</span><br><span class="line">                 annot_kws=&#123;</span><br><span class="line">                     <span class="string">'size'</span>: <span class="number">6</span>,</span><br><span class="line">                     <span class="string">'weight'</span>: <span class="string">'bold'</span></span><br><span class="line">                 &#125;)</span><br><span class="line"><span class="comment">#热力图参数设置（相关系数矩阵，颜色，每个值间隔等）</span></span><br><span class="line">plt.xticks(np.arange(len(names)) + <span class="number">0.5</span>, names)  <span class="comment">#横坐标标注点</span></span><br><span class="line">plt.yticks(np.arange(len(names)) + <span class="number">0.5</span>, names)  <span class="comment">#纵坐标标注点</span></span><br><span class="line">ax.set_title(<span class="string">'Characteristic correlation'</span>)      <span class="comment">#标题设置</span></span><br></pre></td></tr></table></figure>


<pre><code>Text(0.5,1,&apos;Characteristic correlation&apos;)</code></pre><p><img src="/articles/Titanic/output_17_1.png" alt="png"></p>
<h4 id="tips"><a href="#tips" class="headerlink" title="tips"></a>tips</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># value_counts():返回各个属性的数量</span></span><br><span class="line"><span class="comment"># 这里可以看到 男性 557人，女性 314人</span></span><br><span class="line"><span class="comment"># 参数 normalize=True 时，返回的是各自的比例</span></span><br><span class="line">dt_train[<span class="string">'Sex'</span>].value_counts()</span><br></pre></td></tr></table></figure>


<pre><code>(male      577
 female    314
 Name: Sex, dtype: int64, &apos; &apos;, male      0.647587
 female    0.352413
 Name: Sex, dtype: float64)</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dt_train[<span class="string">'Sex'</span>].value_counts(normalize=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>


<pre><code>male      0.647587
female    0.352413
Name: Sex, dtype: float64</code></pre><h3 id="关于缺失值"><a href="#关于缺失值" class="headerlink" title="关于缺失值"></a>关于缺失值</h3><p>对于数据中的缺失值如何处理是需要我们结合问题具体分析的。有时会用均值或中位数等统计值来填充，有的也可以用模型进行预测，对于缺失不是很严重的我们甚至可以直接丢弃。</p>
</div></div></div>
    
  </div>

     <div id="gitalk-container"></div>
     

<!-- Gitalk评论插件通用代码 -->
<div id="gitalk-container"></div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
<script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
<script src="//cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.js"></script>
<script>
const gitalk = new Gitalk({
  clientID: 'ee979f0e6d62adec6722',
  clientSecret: 'af19f8bdcad202e18bd00c4b65105281776a7570',
  repo: 'hahally.github.io',
  owner: 'hahally',
  // 在这里设置一下截取前50个字符串, 这是因为 github 对 label 的长度有了要求, 如果超过
  // 50个字符串则会报错.
  // id: location.pathname.split('/').pop().substring(0, 49),
  id: md5(location.pathname),
  admin: ['hahally'],
  // facebook-like distraction free mode
  distractionFreeMode: false
})
gitalk.render('gitalk-container')
</script>
<!-- Gitalk代码结束 -->




</article>


   
  <div class="text-center donation">
    <div class="inner-donation">
      <span class="btn-donation">支持一下</span>
      <div class="donation-body">
        <div class="tip text-center">扫一扫，支持hahally</div>
        <ul>
        
          <li class="item">
            
              <span>微信扫一扫</span>
            
            <img src="/images/qr-wechat.png" alt="">
          </li>
        
          <li class="item">
            
              <span>支付宝扫一扫</span>
            
            <img src="/images/qr-alipay.png" alt="">
          </li>
        
        </ul>
      </div>
    </div>
  </div>


   
  <div class="box-prev-next clearfix">
    <a class="show pull-left" href="/articles/oneSimpleDL/">
        <i class="icon icon-angle-left"></i>
    </a>
    <a class="show pull-right" href="/articles/TsinghuaDogs-1/">
        <i class="icon icon-angle-right"></i>
    </a>
  </div>




</div>


  <a id="backTop" class="back-top">
    <i class="icon-angle-up"></i>
  </a>



  <div class="modal" id="modal">
  <span id="cover" class="cover hide"></span>
  <div id="modal-dialog" class="modal-dialog hide-dialog">
    <div class="modal-header">
      <span id="close" class="btn-close">关闭</span>
    </div>
    <hr>
    <div class="modal-body">
      <ul class="list-toolbox">
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/archives/"
              rel="noopener noreferrer"
              target="_self"
              >
              博客
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/category/"
              rel="noopener noreferrer"
              target="_self"
              >
              分类
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/tag/"
              rel="noopener noreferrer"
              target="_self"
              >
              标签
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/link/"
              rel="noopener noreferrer"
              target="_self"
              >
              友链
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/about/"
              rel="noopener noreferrer"
              target="_self"
              >
              关于
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/atom.xml"
              rel="noopener noreferrer"
              target="_blank"
              >
              RSS
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/search/"
              rel="noopener noreferrer"
              target="_self"
              >
              搜索
            </a>
          </li>
        
      </ul>

    </div>
  </div>
</div>



  
      <div class="fexo-comments comments-post">
    
  <section class="disqus-comments">
    <div id="disqus_thread">
      <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript" target="_blank" rel="noopener">comments powered by Disqus.</a></noscript>
    </div>
  </section>

  <script>
    var disqus_shortname = 'forsigner';
    
    var disqus_url = 'https://hahally.github.io/articles/Titanic/';
    
    (function(){
      var dsq = document.createElement('script');
      dsq.type = 'text/javascript';
      dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>

  <script id="dsq-count-scr" src="//forsigner.disqus.com/count.js" async></script>



    

    
    

    

    
    

    

<!-- Gitalk评论插件通用代码 -->
<div id="gitalk-container"></div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
<script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
<script src="//cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.js"></script>
<script>
const gitalk = new Gitalk({
  clientID: 'ee979f0e6d62adec6722',
  clientSecret: 'af19f8bdcad202e18bd00c4b65105281776a7570',
  repo: 'hahally.github.io',
  owner: 'hahally',
  // 在这里设置一下截取前50个字符串, 这是因为 github 对 label 的长度有了要求, 如果超过
  // 50个字符串则会报错.
  // id: location.pathname.split('/').pop().substring(0, 49),
  id: md5(location.pathname),
  admin: ['hahally'],
  // facebook-like distraction free mode
  distractionFreeMode: false
})
gitalk.render('gitalk-container')
</script>
<!-- Gitalk代码结束 -->



  </div>

  

  <script type="text/javascript">
  function loadScript(url, callback) {
    var script = document.createElement('script')
    script.type = 'text/javascript';

    if (script.readyState) { //IE
      script.onreadystatechange = function() {
        if (script.readyState == 'loaded' ||
          script.readyState == 'complete') {
          script.onreadystatechange = null;
          callback();
        }
      };
    } else { //Others
      script.onload = function() {
        callback();
      };
    }

    script.src = url;
    document.getElementsByTagName('head')[0].appendChild(script);
  }

  window.onload = function() {
    loadScript('/js/bundle.js?235683', function() {
      // load success
    });
  }
</script><!-- hexo-inject:begin --><!-- hexo-inject:end -->

</body>
</html>
